!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.sizeSensor={})}(this,function(e){"use strict";var t=1;var n=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createSensor=function(){"static"===getComputedStyle(n.element).position&&(n.element.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",n.resizeListener),n.resizeListener()},e.setAttribute("style","display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;opacity:0"),e.setAttribute("class","size-sensor-object"),e.type="text/html",n.element.appendChild(e),e.data="about:blank",e},this.resizeListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=null;return function(){for(var i=this,s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];clearTimeout(n),n=setTimeout(function(){e.apply(i,r)},t)}}(function(){n.listeners.forEach(function(e){e(n.element)})}),this.bind=function(e){n.sensor||(n.sensor=n.createSensor()),-1===n.listeners.indexOf(e)&&n.listeners.push(e)},this.unbind=function(e){var t=n.listeners.indexOf(e);-1!==t&&n.listeners.splice(t,1),0===n.listeners.length&&n.sensor&&n.destroy()},this.destroy=function(){n.sensor&&n.sensor.parentNode&&(n.sensor.contentDocument.defaultView.removeEventListener("resize",n.resizeListener),n.sensor.parentNode.removeChild(n.sensor),n.sensor=void 0,n.listeners=[])},this.element=t,this.listeners=[],this.sensor=void 0},i={},s=function(e){var s=e.getAttribute("size-sensor-id");if(s&&i[s])return i[s];var r=""+t++;e.setAttribute("size-sensor-id",r);var o=new n(e);return i[r]=o,o};e.bind=function(e,t){var n=s(e);return n.bind(t),function(){n.unbind(t)}},e.clear=function(e){!function(e){var t=e.element.getAttribute("size-sensor-id");e.element.removeAttribute("size-sensor-id"),e.destroy(),t&&i[t]&&delete i[t]}(s(e))},Object.defineProperty(e,"__esModule",{value:!0})});
